<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brunos Website — Kernel Mode</title>
  <style>
    :root{
      --term: #7bd389;     /* dezentes Terminal-Grün */
      --term-dim: #3f7f63; /* gedimmt */
      --bg: #000;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--term);
      font-family: "Ubuntu Mono", monospace;
    }

    body {
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Statusbar */
    .statusbar {
      flex: 0 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 12px;
      border-bottom: 1px solid var(--term-dim);
      background: #020202;
      letter-spacing: .3px;
    }
    .statusbar .left { white-space: nowrap; font-weight: bold; }
    .statusbar .right { display: flex; gap: 16px; white-space: nowrap; }

    /* Tabs */
    .tabs {
      flex: 0 0 auto;
      display: flex;
      gap: 8px;
      padding: 6px 12px;
      background: #050505;
      border-bottom: 1px solid var(--term-dim);
    }
    .tab {
      color: var(--term);
      text-decoration: none;
      border: 1px solid var(--term-dim);
      padding: 4px 10px;
      background: #0a0a0a;
      text-transform: uppercase;
      letter-spacing: .05em;
      border-radius: 0;
    }
    .tab:hover { background: #0f0f0f; }

    /* Suche */
    .searchbar {
      flex: 0 0 auto;
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-bottom: 1px dashed var(--term-dim);
      background: #060606;
      font-size: 14px;
    }
    .prompt-label { color: var(--term-dim); }
    form { display: inline-flex; align-items: center; gap: 6px; margin: 0; }
    input[type="text"] {
      width: 320px; background: #000; color: var(--term);
      border: 1px solid var(--term-dim); border-radius: 0;
      padding: 6px 8px; outline: none; caret-color: var(--term);
    }
    input[type="text"]::placeholder { color: color-mix(in srgb, var(--term) 55%, #000); }
    button {
      height: 30px; padding: 0 10px; background: #0a0a0a;
      color: var(--term); border: 1px solid var(--term-dim);
      border-radius: 0; cursor: pointer;
    }
    button:hover { background: #0f0f0f; }

    /* Kernel-Konsole */
    .console {
      flex: 1 1 auto;
      overflow: auto;
      padding: 12px;
      line-height: 1.45;
      white-space: pre-wrap;
      font-size: 14px;
      background-image: repeating-linear-gradient(transparent, transparent 22px, rgba(123,211,137,0.03) 23px);
    }
    .ok { color: var(--term); }
    .dim { color: var(--term-dim); }

    /* Verstecke alten Footer & Standardtexte */
    .footer, .social-icons, h1, p { display: none; }
  </style>
</head>
<body>

  <!-- Statusbar -->
  <div class="statusbar">
    <div class="left">Welcome to my website</div>
    <div class="right">
      <span class="dim" id="date"></span>
      <span class="dim" id="clock"></span>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs">
    <a class="tab" href="index.html">Home</a>
    <a class="tab" href="ueber-mich.html">Über mich</a>
    <a class="tab" href="projekte.html">Projekte</a>
    <a class="tab" href="kontakt.html">Kontakt</a>
  </div>

  <!-- Suche -->
  <div class="searchbar">
    <span class="prompt-label">root@bruno:~#</span>
    <form action="https://www.google.com/search" method="get" class="search-margin">
      <input type="text" name="q" placeholder="dmesg | grep 'suchbegriff'">
      <button type="submit">run</button>
    </form>
  </div>

  <!-- Kernel-Log -->
  <div class="console" id="info"></div>

  <script>
    // Datum / Uhrzeit
    function updateClock() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      const s = String(now.getSeconds()).padStart(2, '0');
      document.getElementById('clock').textContent = `[${h}:${m}:${s}]`;
    }
    function updateDate() {
      const now = new Date();
      const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
      document.getElementById('date').textContent = now.toLocaleDateString('de-DE', options);
    }
    setInterval(updateClock, 1000);
    updateClock();
    updateDate();

    // Kernel-Timestamps
    const bootStart = performance.now();
    function ts() {
      const ms = (performance.now() - bootStart) / 1000;
      return `[ ${ms.toFixed(6).padStart(10, ' ')}]`;
    }
    function log(line, ok=true) {
      const infoEl = document.getElementById('info');
      const status = ok ? '<span class="ok"> OK </span>' : '<span class="dim"> .. </span>';
      infoEl.insertAdjacentHTML('beforeend', `${ts()} ${status} ${line}\n`);
      infoEl.scrollTop = infoEl.scrollHeight;
    }
    const sleep = (ms) => new Promise(r => setTimeout(r, ms));

    // UA-Parser
    function parseUA() {
      const ua = navigator.userAgent;
      const browser =
        ua.includes("Firefox") ? "Firefox" :
        ua.includes("Edg/") ? "Edge" :
        ua.includes("Chrome") ? "Chrome" :
        ua.includes("Safari") ? "Safari" : "Unbekannt";
      const version = (ua.match(/(Firefox|Edg|Chrome)\/([\d.]+)/) || [])[2] ||
                      (ua.match(/Version\/([\d.]+).*Safari/) || [])[1] || "";
      let os = "Unbekannt", osversion = "";
      if (/Windows NT/.test(ua)) {
        os = "Windows";
        osversion = (ua.match(/Windows NT ([\d.]+)/) || [])[1] || "";
      } else if (/Mac OS X/.test(ua)) {
        os = "macOS";
        const m = ua.match(/Mac OS X ([\d_]+)/);
        osversion = m ? m[1].replaceAll("_", ".") : "";
      } else if (/Android/.test(ua)) {
        os = "Android";
        osversion = (ua.match(/Android ([\d.]+)/) || [])[1] || "";
      } else if (/iPhone|iPad|iPod/.test(ua)) {
        os = "iOS";
      }
      return { browser, version, os, osversion };
    }

    // Langer „Boot“-Ablauf mit Spaß
    (async () => {
      log("Booting Bruno Kernel 1.0 (monolithic) ...");           await sleep(180);
      log("cpu: bringing up cores 0..3");                          await sleep(120);
      log("mm: memory controller initialized");                    await sleep(110);
      log("rtc: timebase synced");                                 await sleep(110);
      log("ui: frame buffer online");                              await sleep(100);

      const ui = parseUA();
      log(`ui: user-agent detected -> ${ui.browser} ${ui.version} on ${ui.os} ${ui.osversion}`); await sleep(150);

      // Spaßige „Kernel-Tasks“
      log("init: lade kaffeetreiber ...");                         await sleep(220);
      log("sched: starte produktivitäts-daemon");                  await sleep(160);
      log("fs: mount /cake (ext4, rw)");                           await sleep(160);
      log("userland: backe käsekuchen ...");                       await sleep(250);
      log("housekeeping: putze klo ...");                          await sleep(230);
      log("net: preparing interface eth0");                        await sleep(180);
      log("security: enabling sarcasm mitigations");               await sleep(150);
      log("rng: entropy ok");                                      await sleep(120);
      log("drivers: tea_kettle, cookie_oven registered");          await sleep(180);
      log("core: warming up dad-joke module");                     await sleep(200);
      log("pm: entering performance mode");                        await sleep(160);

      // Nach einigen Sekunden: IP + Ort + Adresse holen
      log("net: bringing up interface eth0 ...");                  await sleep(260);
      try {
        const r = await fetch('https://ipapi.co/json/');
        if (!r.ok) throw new Error('HTTP ' + r.status);
        const data = await r.json();

        const ip = data.ip || 'unknown';
        const city = data.city || '';
        const region = data.region || '';
        const country = data.country_name || data.country || '';
        const postal = data.postal || '';
        const parts = [];
        if (postal) parts.push(postal);
        if (city) parts.push(city);
        if (region && region !== city) parts.push(region);
        if (country) parts.push(country);
        const fullAddress = parts.join(', ') || 'location unavailable';

        log(`net: assigned address ${ip}`);                        await sleep(120);
        log(`geo: resolved location -> ${city || 'unknown'}, ${country || ''}`); await sleep(120);
        log(`addr: ${fullAddress}`);                               await sleep(100);
        log("services: user-space ready.");                        await sleep(90);
        log("security: remember to stay safe ;)");                 await sleep(80);
      } catch (e) {
        log("net: failed to acquire IP/location (degraded mode)", false);
        console.error('Geo-IP-Fehler:', e);
      }
    })();
  </script>
</body>
</html>
